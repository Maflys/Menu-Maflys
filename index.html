<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maflys - Postres & Ponqués Artesanales</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #E8B09A;
            --primary-dark: #D17A51;
            --secondary: #F0E0D6;
            --accent: #F3C29B;
            --bg-light: #FEF9F0;
            --bg-dark: #1E1A17;
            --text-light: #4A3B31;
            --text-dark: #F5EADD;
            --card-bg-light: #FFF;
            --card-bg-dark: #2C2622;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-dark: rgba(255, 255, 255, 0.05);
            --success: #C5E4BC;
            --rating: #FFD700;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-light);
            color: var(--text-light);
            line-height: 1.7;
            transition: var(--transition);
            overflow-x: hidden;
        }

        body.dark {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 30px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .logo {
            display: inline-block;
            margin-bottom: 15px;
        }

        .logo h1 {
            font-size: 3.5rem;
            margin: 0;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 1px;
        }

        .logo p {
            font-size: 1.3rem;
            color: #fff;
            margin: 0;
            font-style: italic;
            letter-spacing: 2px;
        }

        .header-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 Q50,80 0,100 Z"></path></svg>');
            background-size: 100% 100%;
            opacity: 0.7;
        }

        nav {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        body.dark nav {
            background-color: rgba(30, 26, 23, 0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            position: relative;
            padding: 5px 0;
            transition: var(--transition);
        }

        body.dark .nav-links a {
            color: var(--text-dark);
        }

        .nav-links a:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-dark);
            transition: var(--transition);
        }

        .nav-links a:hover:after {
            width: 100%;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-btn {
            position: relative;
            background: none;
            border: none;
            font-size: 1.3rem;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark .cart-btn {
            color: var(--text-dark);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary-dark);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .toggle-btn {
            background: none;
            border: none;
            font-size: 1.3rem;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark .toggle-btn {
            color: var(--text-dark);
        }

        .hero {
            background: url('https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') center/cover no-repeat;
            height: 60vh;
            display: flex;
            align-items: center;
            position: relative;
            margin-top: -50px;
            z-index: 1;
        }

        .hero:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.3));
        }

        .hero-content {
            position: relative;
            z-index: 2;
            color: white;
            max-width: 600px;
        }

        .hero h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--primary-dark);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(209, 122, 81, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(209, 122, 81, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            margin-left: 15px;
        }

        .btn-outline:hover {
            background: white;
            color: var(--primary-dark);
        }

        /* Categories */
        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }

        body.dark .section-title h2 {
            color: var(--accent);
        }

        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: var(--primary);
            margin: 0 auto;
            border-radius: 2px;
        }

        .categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 40px;
        }

        .category-btn {
            padding: 8px 20px;
            background-color: var(--secondary);
            border: none;
            border-radius: 20px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark .category-btn {
            background-color: #3E342D;
            color: var(--text-dark);
        }

        .category-btn.active,
        .category-btn:hover {
            background-color: var(--primary-dark);
            color: white;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: var(--card-bg-light);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow-light);
            transition: var(--transition);
            position: relative;
        }

        body.dark .product-card {
            background-color: var(--card-bg-dark);
            box-shadow: 0 5px 15px var(--shadow-dark);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--success);
            color: #2a5a2a;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
        }

        .product-image-container {
            width: 100%;
            padding-top: 75%;
            position: relative;
            overflow: hidden;
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-size: 1.3rem;
            margin: 0 0 10px;
            color: var(--primary-dark);
        }

        body.dark .product-name {
            color: var(--accent);
        }

        .product-description {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-bottom: 15px;
            min-height: 60px;
        }

        body.dark .product-description {
            color: var(--text-dark);
        }

        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-light);
        }

        body.dark .product-price {
            color: var(--success);
        }

        .product-rating {
            color: var(--rating);
            font-size: 0.9rem;
        }

        .product-rating .far {
            color: #ccc;
        }

        body.dark .product-rating .far {
            color: #555;
        }

        .add-to-cart {
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background-color: var(--primary);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-to-cart:hover {
            background-color: var(--primary-dark);
        }

        .featured {
            background: url('https://images.unsplash.com/photo-1495147466023-ac5c588e2e94?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') fixed center/cover;
            padding: 120px 0;
            position: relative;
            text-align: center;
            color: white;
        }

        .featured:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .featured-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .featured h2 {
            font-size: 2.8rem;
            margin-bottom: 20px;
        }

        .featured p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .testimonials {
            background-color: var(--secondary);
            padding: 80px 0;
        }

        body.dark .testimonials {
            background-color: #3E342D;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .testimonial-card {
            background-color: var(--card-bg-light);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow-light);
            transition: var(--transition);
        }

        body.dark .testimonial-card {
            background-color: var(--card-bg-dark);
            box-shadow: 0 5px 15px var(--shadow-dark);
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
        }

        .testimonial-text {
            font-style: italic;
            margin-bottom: 20px;
            position: relative;
        }

        .testimonial-text:before {
            content: '"';
            font-size: 4rem;
            color: var(--primary);
            position: absolute;
            top: -20px;
            left: -15px;
            opacity: 0.3;
            line-height: 1;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }

        .author-info h4 {
            margin: 0 0 5px;
            font-size: 1.1rem;
        }

        .author-info p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.8;
        }

        body.dark .author-info p {
            color: var(--text-dark);
        }

        .newsletter {
            background-color: var(--primary);
            padding: 60px 0;
            text-align: center;
            color: white;
        }

        .newsletter h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
        }

        .newsletter p {
            max-width: 600px;
            margin: 0 auto 30px;
            font-size: 1.1rem;
        }

        .newsletter-form {
            display: flex;
            max-width: 500px;
            margin: 0 auto;
        }

        .newsletter-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 30px 0 0 30px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
        }

        .newsletter-btn {
            padding: 15px 25px;
            background-color: var(--primary-dark);
            color: white;
            border: none;
            border-radius: 0 30px 30px 0;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .newsletter-btn:hover {
            background-color: #b85e38;
        }

        footer {
            background-color: var(--text-light);
            color: white;
            padding: 60px 0 30px;
        }

        body.dark footer {
            background-color: #111;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-col h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--primary);
        }

        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary);
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lightbox.show {
            display: flex;
            opacity: 1;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.4s ease-out;
            border-radius: 5px;
        }

        .lightbox-caption {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            padding: 10px;
            font-size: 1.1rem;
            background: rgba(0, 0, 0, 0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 30px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }

        .lightbox-close:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 50px;
            cursor: pointer;
            padding: 20px;
            user-select: none;
            opacity: 0.7;
            transition: var(--transition);
        }

        .lightbox-nav:hover {
            opacity: 1;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            /* ANTES: right: -400px; */
            width: 400px;
            max-width: 90vw;
            /* MEJORA: Asegura que nunca sea más ancho que el 90% de la pantalla */
            height: 100%;
            background-color: var(--card-bg-light);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            /* ANTES: transition: var(--transition); (que animaba 'all') */
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
        }

        body.dark .cart-sidebar {
            background-color: var(--card-bg-dark);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
        }

        .cart-sidebar.open {
            transform: translateX(0);
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.dark .cart-header {
            border-bottom: 1px solid #3E342D;
        }

        .cart-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        body.dark .close-cart {
            color: var(--text-dark);
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        body.dark .cart-item {
            border-bottom: 1px solid #3E342D;
        }

        .cart-item-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 15px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 500;
            margin: 0 0 5px;
        }

        .cart-item-price {
            color: var(--primary-dark);
            font-weight: 600;
            margin: 0 0 10px;
        }

        body.dark .cart-item-price {
            color: var(--accent);
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
        }

        .quantity-btn {
            background-color: #eee;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.dark .quantity-btn {
            background-color: #3E342D;
            color: var(--text-dark);
        }

        .quantity {
            margin: 0 10px;
        }

        .remove-item {
            margin-left: auto;
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
        }

        body.dark .cart-footer {
            border-top: 1px solid #3E342D;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-dark);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .checkout-btn:hover {
            background-color: #b85e38;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .overlay.show {
            display: block;
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .hero h2 { font-size: 2.5rem; }
            .section-title h2 { font-size: 2.2rem; }
            .featured h2 { font-size: 2.4rem; }
        }

        @media (max-width: 768px) {
            .nav-container { flex-direction: column; gap: 15px; }
            .logo h1 { font-size: 2.8rem; }
            .hero { height: 50vh; margin-top: 0; }
            .hero h2 { font-size: 2rem; }
            .hero p { font-size: 1rem; }
            .btn { padding: 10px 20px; font-size: 0.9rem; }
            .section { padding: 60px 0; }
            
            /* Ajustes sección "Nosotros" para tablet */
            .nosotros-content-wrapper { flex-direction: column; }
            .nosotros-text, .nosotros-image-container { order: 0; flex-basis: 100%; }
            .nosotros-text h3 { font-size: 1.8rem; }
            .nosotros-pilares { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 576px) {
            .nav-links { flex-direction: column; align-items: center; gap: 10px; }
            .logo h1 { font-size: 2.2rem; }
            .logo p { font-size: 1rem; }
            .hero { height: auto; padding: 60px 0; text-align: center; }
            .hero-content { padding: 0 20px; }
            .hero h2 { font-size: 1.8rem; }
            .btn-group { display: flex; flex-direction: column; gap: 15px; align-items: center; }
            .btn-outline { margin-left: 0; }
            .section-title h2 { font-size: 1.8rem; }
            .product-grid { grid-template-columns: 1fr; }
            .newsletter-form { flex-direction: column; }
            .newsletter-input { border-radius: 30px; margin-bottom: 10px; text-align: center; }
            .newsletter-btn { border-radius: 30px; }
            .nosotros-pilares { grid-template-columns: 1fr; }
        }

        #nosotros {
            background-color: var(--secondary);
            padding-top: 80px;
            padding-bottom: 100px;
        }

        body.dark #nosotros {
            background-color: #3E342D;
        }

        .nosotros-content-wrapper {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 40px;
            margin-top: 50px;
        }

        .nosotros-text {
            flex: 2 1 500px;
            order: 1;
        }

        .nosotros-image-container {
            flex: 1 1 400px;
            text-align: center;
            order: 2;
        }

        .nosotros-image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 25px var(--shadow-light);
        }

        body.dark .nosotros-image-container img {
            box-shadow: 0 10px 25px var(--shadow-dark);
        }

        .nosotros-text h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--primary-dark);
            margin-bottom: 20px;
        }

        body.dark .nosotros-text h3 {
            color: var(--accent);
        }

        .nosotros-text p {
            margin-bottom: 1.5em;
            font-size: 1.05rem;
            line-height: 1.8;
        }

        .nosotros-text p:last-of-type {
            margin-top: 30px;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--primary-dark);
        }

        body.dark .nosotros-text p:last-of-type {
            color: var(--accent);
        }

        .nosotros-pilares {
            margin-top: 40px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
        }

        @keyframes fadeInUpPilar {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .pilar-item {
            background-color: var(--card-bg-light);
            padding: 25px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow-light);
            text-align: center;
            transition: var(--transition);

            opacity: 0;
            transform: translateY(30px) scale(0.95);
            animation: fadeInUpPilar 0.5s ease-out forwards;
        }

        .nosotros-pilares .pilar-item:nth-child(1) {
            animation-delay: 0.2s;
        }

        .nosotros-pilares .pilar-item:nth-child(2) {
            animation-delay: 0.4s;
        }

        .nosotros-pilares .pilar-item:nth-child(3) {
            animation-delay: 0.6s;
        }



        body.dark .pilar-item {
            background-color: var(--card-bg-dark);
            box-shadow: 0 5px 15px var(--shadow-dark);
        }

        .pilar-item:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 25px var(--shadow-light);
        }

        body.dark .pilar-item:hover {
            box-shadow: 0 12px 25px var(--shadow-dark);
        }


        .pilar-item i {
            font-size: 2.2rem;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }

        body.dark .pilar-item i {
            color: var(--accent);
        }

        .pilar-item h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--primary-dark);
        }

        body.dark .pilar-item h4 {
            color: var(--accent);
        }

        .pilar-item p {
            font-size: 0.9rem;
            margin-bottom: 0;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .nosotros-content-wrapper {
                gap: 30px;
            }

            .nosotros-text,
            .nosotros-image-container {
                flex-basis: 100%;
                order: 0;
            }

            .nosotros-text h3 {
                font-size: 1.8rem;
            }

            .nosotros-pilares {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            @media (min-width: 480px) and (max-width: 768px) {
                .nosotros-pilares {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
        }

        .pilar-item {
            background-color: var(--card-bg-light);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow-light);
            text-align: center;
            transition: var(--transition);
        }

        body.dark .pilar-item {
            background-color: var(--card-bg-dark);
            box-shadow: 0 5px 15px var(--shadow-dark);
        }

        .pilar-item:hover {
            transform: translateY(-5px);
        }

        .pilar-item i {
            font-size: 2rem;
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        body.dark .pilar-item i {
            color: var(--accent);
        }

        .pilar-item h4 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 8px;
            color: var(--primary-dark);
        }

        body.dark .pilar-item h4 {
            color: var(--accent);
        }

        .pilar-item p {
            font-size: 0.9rem;
            margin-bottom: 0;
        }

        #nosotros {
            background-color: var(--secondary);
            padding-bottom: 100px;
        }

        body.dark #nosotros {
            background-color: #3E342D;
        }

        .nosotros-text p:last-of-type {
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--primary-dark);
        }

        body.dark .nosotros-text p:last-of-type {
            color: var(--accent);
        }


        @media (max-width: 768px) {
            .nosotros-content-wrapper {
                gap: 20px;
            }

            .nosotros-image-container,
            .nosotros-text {
                flex-basis: 100%;
            }

            .nosotros-text h3 {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }

            .logo h1 {
                font-size: 2.8rem;
            }

            .hero {
                height: 50vh;
                margin-top: 0;
            }

            .hero h2 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 60px 0;
            }

            .cart-sidebar {
                width: 350px;
            }
        }

        @media (max-width: 576px) {
            .logo h1 {
                font-size: 2.2rem;
            }

            .logo p {
                font-size: 1rem;
            }

            .hero {
                height: 400px;
                text-align: center;
            }

            .hero-content {
                padding: 0 20px;
            }

            .hero h2 {
                font-size: 1.8rem;
            }

            .btn-group {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .btn-outline {
                margin-left: 0;
            }

            .section-title h2 {
                font-size: 1.8rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .newsletter-form {
                flex-direction: column;
            }

            .newsletter-input {
                border-radius: 30px;
                margin-bottom: 10px;
            }

            .newsletter-btn {
                border-radius: 30px;
            }

            .cart-sidebar {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <header>
        <div class="header-decoration"></div>
        <div class="header-content">
            <div class="logo">
                <h1>Maflys</h1>
                <p>Postres & Ponqués</p>
            </div>
        </div>
    </header>

    <nav>
        <div class="container nav-container">
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#productos">Productos</a></li>
                <li><a href="#nosotros">Nosotros</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
            <div class="nav-actions">
                <button class="cart-btn" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </button>
                <button class="toggle-btn" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <section class="hero" id="inicio">
        <div class="container hero-content">
            <h2>Delicias horneadas con amor</h2>
            <p>Descubre nuestros exquisitos postres artesanales, elaborados con los mejores ingredientes y mucho cariño.
            </p>
            <div class="btn-group">
                <a href="#productos" class="btn">Ver productos</a>
                <a href="#contacto" class="btn btn-outline">Contactar</a>
            </div>
        </div>
    </section>

    <section class="section" id="productos">
        <div class="container">
            <div class="section-title">
                <h2>Nuestros Productos</h2>
                <p>Selecciona tu categoría favorita</p>
            </div>

            <div class="categories">
                <button class="category-btn active" data-category="all">Todos</button>
                <button class="category-btn" data-category="ponques">Ponqués</button>
                <button class="category-btn" data-category="postres">Postres</button>
                <button class="category-btn" data-category="especiales">Especiales</button>
                <button class="category-btn" data-category="temporada">De temporada</button>
            </div>

            <div class="product-grid" id="productGrid"></div>
        </div>
    </section>

    <section class="featured">
        <div class="container featured-content">
            <h2>Ponqué del Mes</h2>
            <p>Prueba nuestro exclusivo Ponqué de Maracuyá y Chocolate Blanco, una combinación tropical que te
                transportará a paraíso.</p>
            <a href="#" class="btn">Ordenar ahora</a>
        </div>
    </section>

    <section class="section" id="nosotros">
        <div class="container">
            <div class="section-title">
                <h2>Nuestra Dulce Historia</h2>
                <p>Conoce el corazón y la pasión detrás de Maflys</p>
            </div>

            <div class="nosotros-content-wrapper">


                <div class="nosotros-image-container">
                    <img src="https://images.pexels.com/photos/745988/pexels-photo-745988.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                        alt="El arte de la repostería en Maflys">
                </div>

                <div class="nosotros-text">
                    <h3>
                        Maflys: Sabor y Tradición desde el Corazón de Cúcuta
                    </h3>
                    <p>
                        En el vibrante corazón de Cúcuta, Norte de Santander, nace Maflys, un sueño horneado con amor y
                        la dedicación que solo la repostería artesanal puede ofrecer. Somos más que un emprendimiento;
                        somos artífices de momentos dulces, creadores de sonrisas y cómplices de tus celebraciones más
                        especiales.
                    </p>
                    <p>
                        Nuestra historia comenzó con una pasión: la de transformar ingredientes simples en obras de arte
                        comestibles. Cada ponqué, cada postre que sale de nuestra cocina lleva consigo el legado de
                        recetas perfeccionadas con el tiempo, el esmero de manos expertas y el deseo genuino de
                        compartir alegría. Creemos firmemente que los mejores ingredientes, combinados con una pizca de
                        creatividad y mucho cariño, son la clave para conquistar hasta el paladar más exigente.
                    </p>

                    <div class="nosotros-pilares">
                        <div class="pilar-item">
                            <i class="fas fa-heart"></i>
                            <h4>Pasión Artesanal</h4>
                            <p>Cada delicia es hecha a mano, cuidando cada detalle.</p>
                        </div>
                        <div class="pilar-item">
                            <i class="fas fa-leaf"></i>
                            <h4>Ingredientes Frescos</h4>
                            <p>Seleccionamos lo mejor para garantizar un sabor insuperable.</p>
                        </div>
                        <div class="pilar-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <h4>Sabor Cucuteño</h4>
                            <p>Orgullosamente locales, endulzando nuestra tierra.</p>
                        </div>
                    </div>

                    <p>
                        En Maflys, no solo horneamos postres; creamos experiencias memorables. Desde el primer contacto
                        hasta el último bocado, queremos que te sientas parte de nuestra familia. Te invitamos a
                        descubrir el sabor auténtico de Cúcuta en cada una de nuestras creaciones.
                    </p>
                    <p>
                        ¡Gracias por permitirnos endulzar tus días!
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section class="section testimonials">
        <div class="container">
            <div class="section-title">
                <h2>Lo que dicen nuestros clientes</h2>
                <p>Experiencias reales con nuestros productos</p>
            </div>

            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="testimonial-text">
                        Los ponqués de Maflys son simplemente increíbles. Pedí uno para el cumpleaños de mi hija y todos
                        quedaron encantados con el sabor y la presentación.
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/43.jpg" alt="Cliente" class="author-avatar">
                        <div class="author-info">
                            <h4>María González</h4>
                            <p>Cliente frecuente</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-text">
                        El cheesecake de frutos rojos es mi debilidad. Siempre que tengo una reunión familiar pido uno y
                        nunca sobra ni una migaja.
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Cliente" class="author-avatar">
                        <div class="author-info">
                            <h4>Carlos Mendoza</h4>
                            <p>Cliente desde 2020</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-text">
                        La atención es excelente y los productos llegan en perfecto estado. El ponqué de chocolate es el
                        mejor que he probado en mi vida.
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Cliente" class="author-avatar">
                        <div class="author-info">
                            <h4>Ana Rodríguez</h4>
                            <p>Cliente corporativo</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter">
        <div class="container">
            <h2>Únete a nuestro club de dulces</h2>
            <p>Recibe descuentos exclusivos, novedades y recetas especiales directamente en tu correo.</p>
            <form id="newsletter-form" class="newsletter-form">
                <input id="newsletter-email" type="email" placeholder="Tu correo electrónico" class="newsletter-input"
                    required>
                <button type="submit" class="newsletter-btn">Suscribirse</button>
            </form>
        </div>
    </section>

    <footer id="contacto">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Maflys</h3>
                    <p>Postres y ponqués artesanales elaborados con los mejores ingredientes y mucho amor.</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/maflys_reposteria/profilecard/?igsh=eHhvMmliYnF3NGds"
                            target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.tiktok.com/@luzyanethbarajasj?_r=1&_d=eg6gf44cg2hkj2&sec_uid=MS4wLjABAAAAkvWkKU_EUFx_uWDiEI0YNuCbxzORkhWb4tOPyp1sc6fyAbI0nWIVTlO4h2nNfoiv&share_author_id=7132951699929629701&sharer_language=es&source=h5_m&u_code=e3b55lk88cla1a&timestamp=1748050490&user_id=7132951699929629701&sec_user_id=MS4wLjABAAAAkvWkKU_EUFx_uWDiEI0YNuCbxzORkhWb4tOPyp1sc6fyAbI0nWIVTlO4h2nNfoiv&utm_source=whatsapp&utm_campaign=client_share&utm_medium=android&share_iid=7507788205946849032&share_link_id=dea5da1e-55dc-489c-b90a-6057adee9c64&share_app_id=1233&ugbiz_name=ACCOUNT&ug_btm=b8727%2Cb7360&social_share_type=5&enable_checksum=1"
                            target="_blank"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>

                <div class="footer-col">
                    <h3>Enlaces</h3>
                    <ul class="footer-links">
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#productos">Productos</a></li>
                        <li><a href="#nosotros">Nosotros</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                        <li><a href="#">Términos y condiciones</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h3>Contacto</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> Cúcuta, Norte de Santander</li>
                        <li><i class="fas fa-phone"></i> +57 123 456 7890</li>
                        <li><i class="fas fa-envelope"></i> hola@maflys.com</li>
                        <li><i class="fas fa-clock"></i> Lunes a Sábado: 9am - 7pm</li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2023 Maflys - Postres & Ponqués. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <div class="lightbox" id="lightbox">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <span class="lightbox-nav lightbox-prev" onclick="changeSlide(-1)">&#10094;</span>
        <span class="lightbox-nav lightbox-next" onclick="changeSlide(1)">&#10095;</span>
        <img class="lightbox-content" id="lightboxImg">
        <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Tu Carrito</h3>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0</span>
            </div>
            <button class="checkout-btn" onclick="submitOrder()">Enviar pedido por WhatsApp</button>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="toggleCart()"></div>

    <script>
        const products = [
            {
                id: 1,
                name: "Ponqué de Chocolate Intenso",
                description: "Un clásico irresistible con capas de bizcocho húmedo y frosting de chocolate belga.",
                image: "https://images.pexels.com/photos/291528/pexels-photo-291528.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 25000,
                category: "ponques",
                rating: 5,
                featured: true
            },
            {
                id: 2,
                name: "Torta Red Velvet Pasión",
                description: "Suave bizcocho rojo aterciopelado con un toque de cacao y frosting de queso crema.",
                image: "https://images.pexels.com/photos/6210957/pexels-photo-6210957.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 28000,
                category: "ponques",
                rating: 4,
                featured: false
            },
            {
                id: 3,
                name: "Cheesecake de Frutos Rojos",
                description: "Cremoso cheesecake horneado sobre una base de galleta, coronado con mermelada casera de frutos rojos.",
                image: "https://images.pexels.com/photos/1126359/pexels-photo-1126359.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 22000,
                category: "postres",
                rating: 5,
                featured: true
            },
            {
                id: 4,
                name: "Torta de Zanahoria Especial",
                description: "Húmeda torta de zanahoria con nueces y un delicioso frosting de queso crema y vainilla.",
                image: "https://images.pexels.com/photos/4110005/pexels-photo-4110005.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 26000,
                category: "ponques",
                rating: 4,
                featured: false
            },
            {
                id: 5,
                name: "Macarons Surtidos",
                description: "Caja con 12 macarons de diferentes sabores: fresa, chocolate, vainilla y limón.",
                image: "https://images.pexels.com/photos/808941/pexels-photo-808941.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 18000,
                category: "postres",
                rating: 4,
                featured: false
            },
            {
                id: 6,
                name: "Ponqué de Maracuyá y Chocolate Blanco",
                description: "Exquisita combinación tropical con relleno de crema de maracuyá y cobertura de chocolate blanco.",
                image: "https://images.pexels.com/photos/140831/pexels-photo-140831.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 30000,
                category: "especiales",
                rating: 5,
                featured: true
            },
            {
                id: 7,
                name: "Torta de Café y Avellanas",
                description: "Deliciosa torta de café con trozos de avellana tostada y crema de mantequilla de avellana.",
                image: "https://images.pexels.com/photos/3026804/pexels-photo-3026804.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 27000,
                category: "ponques",
                rating: 4,
                featured: false
            },
            {
                id: 8,
                name: "Galletas Decoradas",
                description: "Paquete con 6 galletas decoradas a mano con diseños personalizados según la ocasión.",
                image: "https://images.pexels.com/photos/230325/pexels-photo-230325.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 15000,
                category: "postres",
                rating: 4,
                featured: false
            },
            {
                id: 9,
                name: "Torta de Navidad",
                description: "Especialidad de temporada con frutas confitadas, especias y un toque de ron.",
                image: "https://images.pexels.com/photos/1702373/pexels-photo-1702373.jpeg?auto=compress&cs=tinysrgb&w=600",
                price: 32000,
                category: "temporada",
                rating: 5,
                featured: true
            }
        ];

        // Cart functionality
        let cart = [];
        let currentSlideIndex = 0;
        let lightboxOpen = false;

        // DOM elements
        const productGrid = document.getElementById('productGrid');
        const cartCount = document.querySelector('.cart-count');
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const cartSidebar = document.getElementById('cartSidebar');
        const overlay = document.getElementById('overlay');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxCaption = document.getElementById('lightboxCaption');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const toggleBtn = document.querySelector('.toggle-btn');

        // Initialize the page
        function init() {
            renderProducts(products);
            setupEventListeners();
            updateCartCount();
        }

        // Render products to the grid
        function renderProducts(productsToRender) {
            productGrid.innerHTML = '';

            productsToRender.forEach(product => {
                const ratingStars = renderRatingStars(product.rating);

                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.category = product.category;

                productCard.innerHTML = `
        ${product.featured ? '<span class="product-badge">Destacado</span>' : ''}
        <div class="product-image-container">
          <img class="product-image" src="${product.image}" alt="${product.name}" onclick="openLightbox('${product.image}', '${product.name}')">
        </div>
        <div class="product-info">
          <h3 class="product-name">${product.name}</h3>
          <p class="product-description">${product.description}</p>
          <div class="product-meta">
            <span class="product-price">$${product.price.toLocaleString()}</span>
            <span class="product-rating">${ratingStars}</span>
          </div>
          <button class="add-to-cart" onclick="addToCart(${product.id})">
            <i class="fas fa-plus"></i> Añadir al carrito
          </button>
        </div>
      `;

                productGrid.appendChild(productCard);
            });
        }

        // Render rating stars
        function renderRatingStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<i class="fas fa-star"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Category filter
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const category = btn.dataset.category;
                    if (category === 'all') {
                        renderProducts(products);
                    } else {
                        const filteredProducts = products.filter(p => p.category === category);
                        renderProducts(filteredProducts);
                    }
                });
            });

            // Close lightbox when clicking outside image
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation for lightbox
            document.addEventListener('keydown', (e) => {
                if (lightboxOpen) {
                    if (e.key === 'Escape') {
                        closeLightbox();
                    } else if (e.key === 'ArrowLeft') {
                        changeSlide(-1);
                    } else if (e.key === 'ArrowRight') {
                        changeSlide(1);
                    }
                }
            });
        }

        // Cart functions
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            updateCart();
            showAddToCartFeedback();
        }

        function updateCart() {
            updateCartCount();
            renderCartItems();
            saveCartToLocalStorage();
        }

        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
        }

        function renderCartItems() {
            cartItems.innerHTML = '';

            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center;">Tu carrito está vacío</p>';
                cartTotal.textContent = '$0';
                return;
            }

            let total = 0;

            cart.forEach(item => {
                total += item.price * item.quantity;

                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
        <div class="cart-item-details">
          <h4 class="cart-item-name">${item.name}</h4>
          <p class="cart-item-price">$${(item.price * item.quantity).toLocaleString()}</p>
          <div class="cart-item-actions">
            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
            <span class="quantity">${item.quantity}</span>
            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
            <button class="remove-item" onclick="removeFromCart(${item.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      `;

                cartItems.appendChild(cartItem);
            });

            cartTotal.textContent = `$${total.toLocaleString()}`;
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);

            if (item) {
                item.quantity += change;

                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCart();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        function toggleCart() {
            cartSidebar.classList.toggle('open');
            overlay.classList.toggle('show');
            document.body.style.overflow = cartSidebar.classList.contains('open') ? 'hidden' : '';
        }

        function showAddToCartFeedback() {
            const feedback = document.createElement('div');
            feedback.textContent = '¡Producto añadido al carrito!';
            feedback.style.position = 'fixed';
            feedback.style.bottom = '20px';
            feedback.style.right = '20px';
            feedback.style.backgroundColor = 'var(--success)';
            feedback.style.color = '#2a5a2a';
            feedback.style.padding = '10px 20px';
            feedback.style.borderRadius = '5px';
            feedback.style.boxShadow = '0 3px 10px rgba(0,0,0,0.2)';
            feedback.style.zIndex = '1000';
            feedback.style.animation = 'fadeIn 0.3s ease-out';
            document.body.appendChild(feedback);

            setTimeout(() => {
                feedback.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => feedback.remove(), 300);
            }, 2000);
        }

        function submitOrder() {

            if (cart.length === 0) {
                alert('Tu carrito está vacío.');
                return;
            }

            let message = `¡Hola Maflys! Me gustaría realizar un pedido:\n\n`;

            cart.forEach(item => {
                message += `• ${item.name} x${item.quantity} - $${(item.price * item.quantity).toLocaleString()}\n`;
            });

            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

            const encodedMessage = encodeURIComponent(message);
            const whatsappNumber = '573124173429';

            window.open(`https://wa.me/${whatsappNumber}?text=${encodedMessage}`, '_blank');
        }

        // Lightbox functions
        function openLightbox(src, caption, index = 0) {
            currentSlideIndex = index;
            lightboxImg.src = src;
            lightboxCaption.textContent = caption;
            lightbox.classList.add('show');
            lightboxOpen = true;
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.remove('show');
            lightboxOpen = false;
            document.body.style.overflow = '';
        }

        function changeSlide(direction) {
            const category = document.querySelector('.category-btn.active').dataset.category;
            let filteredProducts = category === 'all' ? products : products.filter(p => p.category === category);

            currentSlideIndex += direction;

            if (currentSlideIndex >= filteredProducts.length) {
                currentSlideIndex = 0;
            } else if (currentSlideIndex < 0) {
                currentSlideIndex = filteredProducts.length - 1;
            }

            const product = filteredProducts[currentSlideIndex];
            lightboxImg.src = product.image;
            lightboxCaption.textContent = product.name;
        }

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark');
            const isDark = document.body.classList.contains('dark');
            localStorage.setItem('darkMode', isDark);

            if (isDark) {
                toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                toggleBtn.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        // Save cart to localStorage
        function saveCartToLocalStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Load cart from localStorage
        function loadCartFromLocalStorage() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }

        // Check for saved dark mode preference
        function checkDarkModePreference() {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark');
                toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
            }
        }

        // Initialize the page
        window.onload = function () {
            init();
            loadCartFromLocalStorage();
            checkDarkModePreference();

            // Add CSS for feedback animation
            const style = document.createElement('style');
            style.textContent = `
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(20px); }
      }
    `;
            document.head.appendChild(style);
        };

        document.getElementById("newsletter-form").addEventListener("submit", async function (event) {
            event.preventDefault();

            const emailInput = document.getElementById("newsletter-email");
            const email = emailInput.value.trim();

            if (!email) {
                alert("Por favor, ingresa un correo válido.");
                return;
            }

            try {
                const response = await fetch("https://sunset-sweet-blackcurrant.glitch.me/club-maflys", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "x-api-key": "cc1de3c95e7180604574886bea3c72b7fe504e1afd5b19c057b07edde6afd48d" // asegúrate de que esta clave coincida con process.env.API_KEY en Glitch
                    },
                    body: JSON.stringify({ email })
                });

                if (!response.ok) {
                    throw new Error("No se pudo registrar el correo. Intenta más tarde.");
                }

                alert("¡Gracias por unirte al Club Maflys!");
                emailInput.value = ""; // limpia el campo
            } catch (error) {
                alert(error.message);
            }
        });

        // Expose functions to global scope
        window.toggleCart = toggleCart;
        window.addToCart = addToCart;
        window.updateQuantity = updateQuantity;
        window.removeFromCart = removeFromCart;
        window.openLightbox = openLightbox;
        window.closeLightbox = closeLightbox;
        window.changeSlide = changeSlide;
        window.toggleDarkMode = toggleDarkMode;
    </script>

</body>

</html>